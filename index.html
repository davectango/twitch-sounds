<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Tango Sound Commands</title>
<style>
html, body {
  margin: 0;
  padding: 0;
  background: transparent;
}
</style>
</head>
<body>

<script type="module">
import tmi from "https://esm.sh/tmi.js@1.8.5";

const channelName = "tangoplaysdead";

const soundMap = {
  "!bruh": "https://www.myinstants.com/media/sounds/movie_1.mp3",
  "!airhorn": "https://www.myinstants.com/media/sounds/airhorn.mp3"
};

let cooldown = false;

function playSound(url) {
  if (cooldown) return;
  cooldown = true;

  const audio = new Audio(url);
  audio.volume = 0.9;
  audio.play().catch(() => {});

  setTimeout(() => cooldown = false, 2000);
}

const client = new tmi.Client({
  channels: [channelName]
});

await client.connect();
console.log("Connected to Twitch");

client.on("message", (channel, tags, message, self) => {
  if (self) return;

  const cmd = message.trim().split(" ")[0].toLowerCase();
  if (soundMap[cmd]) {
    playSound(soundMap[cmd]);
  }
});
</script>

</body>
</html>
