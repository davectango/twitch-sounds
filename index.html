<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Tango Sound Commands</title>
<style>
html, body { margin:0; padding:0; background: transparent; }
</style>
</head>
<body>

<script type="module">
import tmi from "https://esm.sh/tmi.js@1.8.5";

const channelName = "tangoplaysdead";

const soundMap = {
  "!bruh": "https://www.myinstants.com/media/sounds/movie_1.mp3",
  "!horn": "https://www.myinstants.com/media/sounds/airhorn.mp3"
};

let lastPlay = 0;
const COOLDOWN_MS = 2000;

function playSound(url) {
  const now = Date.now();
  if (now - lastPlay < COOLDOWN_MS) return;
  lastPlay = now;

  const audio = new Audio(url);
  audio.volume = 0.9;
  audio.play().catch((e) => console.log("Audio blocked:", e));
}

const client = new tmi.Client({ channels: [channelName] });

await client.connect();
console.log("Connected to Twitch chat:", channelName);

client.on("message", (channel, tags, message, self) => {
  if (self) return;
  const cmd = message.trim().split(" ")[0].toLowerCase();
  const url = soundMap[cmd];
  if (url) playSound(url);
});
</script>

</body>
</html>
