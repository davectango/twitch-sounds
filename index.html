<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Tango Sound Commands</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  background: #111;
  font-family: Arial, sans-serif;
  color: white;
}

/* Toggle Container */
.panel {
  display: flex;
  align-items: center;
  gap: 15px;
  padding: 20px;
}

/* Switch */
.switch {
  position: relative;
  width: 60px;
  height: 30px;
}

.switch input {
  display: none;
}

.slider {
  position: absolute;
  cursor: pointer;
  inset: 0;
  background-color: #b30000;
  border-radius: 30px;
  transition: .3s;
}

.slider:before {
  position: absolute;
  content: "";
  height: 24px;
  width: 24px;
  left: 3px;
  top: 3px;
  background-color: white;
  border-radius: 50%;
  transition: .3s;
}

input:checked + .slider {
  background-color: #00cc66;
}

input:checked + .slider:before {
  transform: translateX(30px);
}

.status {
  font-size: 18px;
  font-weight: bold;
}
</style>
</head>

<body>

<div class="panel">
  <label class="switch">
    <input type="checkbox" id="toggle">
    <span class="slider"></span>
  </label>
  <div class="status" id="status">OFF</div>
</div>

<script type="module">
import tmi from "https://esm.sh/tmi.js@1.8.5";

const channelName = "tangoplaysdead";

const soundMap = {
  "!bruh": "https://www.myinstants.com/media/sounds/movie_1.mp3",
  "!horn": "https://www.myinstants.com/media/sounds/airhorn.mp3",
  "!spin": "https://www.soundjay.com/casino/slot-machine-1.mp3"
};

let enabled = false;

const toggle = document.getElementById("toggle");
const status = document.getElementById("status");

toggle.addEventListener("change", () => {
  enabled = toggle.checked;
  status.textContent = enabled ? "ON" : "OFF";
});

const client = new tmi.Client({ channels: [channelName] });
await client.connect();
console.log("Connected to Twitch chat:", channelName);

client.on("message", (channel, tags, message, self) => {
  if (self) return;
  if (!enabled) return;

  const cmd = message.trim().split(" ")[0].toLowerCase();
  const url = soundMap[cmd];
  if (!url) return;

  const audio = new Audio(url);
  audio.volume = 0.9;
  audio.play().catch(() => {});
});
</script>

</body>
</html>
